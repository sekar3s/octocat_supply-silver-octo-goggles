# Code Quality Demo <img src="./images/koala_tea.png" alt="koala tea" width="30" height="30">

## Turn On Code Quality

>[!IMPORTANT]
> Currently, there is no API to turn on Code Quality, so it must be done manually prior to this demo.
> Additionally, you must ensure that GHAS and Default Setup are enabled prior to running this demo.
> Code Quality will not work without Default Setup enabled.

1. Navigate to the `Settings` tab of your demo repository.
2. Click on `Code Quality` in the left sidebar.
3. Click on `Enable Code Quality` to turn on the feature.
  ![Enable Code Quality button in repository settings](./images/code_quality_enable_view.png)
4. Wait a few minutes for Code Quality to analyze the repository.

## Review Code Quality Findings and Generate Fixes with Copilot

1. To view the Code Quality results, click on the `Security` tab, then select `All findings` under `Code Quality` from the left sidebar.
  ![Code Quality overview in the Security tab](./images/code_quality_security_tab_location.png)
2. Select any of the finding rules to view a list of findings for that rule.
3. Click on `Show more` to review details of the code quality finding and review the recommentation and examples provided.
4. Click on `Show less` to collapse the view to focus on the findings.
5. The findings will be highlighted, and the next action you can take is to click on the `Generate fix` button to create a fix using Copilot to address the issue. Wait for Copilot to finish creating the fix.
  ![Code Quality rule view](./images/code_quality_rule_view.png)
6. Once the fix is presented in the UI, you can click `Open pull request` to create a PR with the suggested fix.
  ![Code Quality fix generated by Copilot](./images/code_quality_copilot_generated_fix.png)

## Review Code Quality Findings in a Pull Request

>[!IMPORTANT]
> Code Quality must be turned on manually prior to this demo. Otherwise, you will not see any findings in the pull request.

1. Navigate to the `Pull requests` tab of your demo repository.
2. Open the pull request `Feature: Add ToS Download`.
3. View the `Files Changed` tab to see the changes made in the PR.
4. Click the ellipsis (`...`) button on the top right side of any of the files changed and click `Edit file`.
5. Add a commented line to that file, and add the changes to the current commit.
  ![Editing a file in a pull request](./images/code_quality_edit_file_commit.png)
6. Wait some time for the CI to run Code Quality analysis and upload the results to GitHub. It should take about 1 to 2 minutes.
7. Back in the `Conversation View`, scroll down to the `github-code-quality` bot comment to view the Code Quality findings related to this PR.
  ![Code Quality findings in a pull request](./images/code_quality_pull_request.png)
8. Review the autofix suggestions provided by Copilot in the comment.
9. Discuss the options a developer can take: commit the suggestion to the PR, dismiss the finding, or reply to the autofix.
10. If you do commit the suggestion to the PR, wait for the CI to run and validate the changes.
